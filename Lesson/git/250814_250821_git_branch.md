# Git Branch

- 원래 web이랑은 별개의 topic이지만..
- CI/CD 환경 구축을 위해서는 branch 분화에 대한 이해가 필수적이기 때문에 끼워서 진행함

- 직접 명령어 쳐보면서 이해하고 습관을 들여야 해서 총 3일(1일차 이론, 2-3일차 실습) 수업



## 이론

### 들어가기 전에..

### ※ 진짜 중요 ※

##### 수업을 들으면서 아리송한 부분이 있다면 반드시 확실하게 이해하고 다음으로 넘어가셔야 합니다.

##### 생소하고 추상적인 개념들이 등장하기 때문에 앞부분을 이해하지 못한 채로 '좀 듣다 보면 뭔 소린지 알겠지?' 하고서 다음 말을 들어봐도 어차피 뭔 소린지 모릅니다.

##### 수업을 잘 들었더라도 높은 확률로 나중에 '그게 뭐였더라..' 하는 생각이 들 겁니다. git은 공부할 기회가 많으니 여러 번 공부하고 실습하며 체화합시다.



### Warm-up

- branch를 배우기 전, 우리는 `main`밖에 모른다.
- 웹 서비스를 운영하고 있다고 생각해보자.



##### 상황 1

- 기능을 추가하고 싶은데, `main`에다 열심히 코드를 쓰고 커밋도 했는데.. 막상 잘 안 된다.
- 에이~ 모르겠다. 일단 다시 되게 만들어놔야지.. 근데 어디까지 잘 작동하는 커밋이었더라?



##### 상황 2

- CI/CD? 아직 잘 모르지만..
- repository에 push가 되면 자동으로 변경된 코드 통합해서 이미지도 새로 배포하고 그 이미지로 서버도 재실행해준다는데 참 좋겠다.
- 근데 내가 잘못 쓴 코드 실수로 push하면 코드 깨져서 서버 닫히는거야? 뭔가 이상한데..



##### 상황 3

- 내가 새로 기능 개발해서 로컬에서 테스트해보니까 잘 되긴 하는데..
- 로컬이랑 서버랑은 환경이 달라서 불안하단 말이야. 도대체 테스트는 어디서 해?



##### 개발은 계속되더라도, 배포되어 있는 라이브 서버의 안정성은 유지되어야 합니다.

##### 이런 문제들을 **Branch**가 해결해줄 겁니다.



### 이후 수업 진행

##### main을 중심으로 해서 branch 뻗어나가는 그림 그려주고 간략하게 설명

##### 다음 주제인 CI/CD와의 연관성 설명(dev -> main branch로 merge되는 것이 trigger가 됨)

##### `250813_branch.md`를 수업자료로 하여 브랜치와 ff merge, non-ff merge 설명



## 실습

### 들어가기 전에..

- 프로젝트를 할 때, branch를 자유롭게 활용하는 것이 아주 강력한 무기가 됩니다.
- 이전에 했던 다른 실습들은 언제든지 다시 배워도 되는 것이지만 오늘 실습은 좋은 습관을 만드는 데에 도움이 됩니다.
- 그러므로 오늘 해본 것들은 꼭 혼자 복습하며 손에 익혀두시길 바랍니다.



### 1일차(250820) 실습

- sourcetree 체험
- Github repo 만들기
- repo 설정에서 main 브랜치 보호 설정
  - 다양한 보호 옵션 둘러보기
- fork - pr - merge 설명 + 실습
  - Cpython github repo 가서 다른 사람들 pr 구경하기
  - fork한 후 직접 pr 올려보기



### 2일차(250821) 실습

- github repo에 새 브랜치 만들기
- 각각의 branch에서 여러 커밋 만들기
  - dev에서 main의 이니셜커밋까지 다 보이는지 확인
- detached commit 만들기
  - 브랜치 옮겨서 안 보이는 거 확인
  - git log, git reflog 확인
- switch로 HEAD 옮기기
- ff merge, non-ff merge 해보기
  - ff merge가 가능한 경우에도 merge commit을 따로 두기 위해 non-ff merge를 쓰는 경우가 많다!

- branch 삭제
  - feature 브랜치 만들어서 커밋 남긴 후 브랜치 삭제하기
  - 다른 브랜치 만들어서 한 번 merge한 후 브랜치 삭제하기
- conflict의 발생과 해결법
  - 한 쪽 변경사항 폐기
  - in-line 충돌 해결



## 마무리

- git을 잘 다루는 게 너무 중요하고 rebase, squash 등 다뤄봐야 할 기능이 아직 남았지만
- 진짜 강사님께서 커리큘럼에 git 심화과정이 있다고 하셨으니 git 관련 주제는 일단 마무리합니다.
- 본격적으로 프로젝트를 하게 되기 전에 꼭 따로 연습해서 익숙해지는 시간을 가지시길 바랍니다.