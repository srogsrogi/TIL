# Observability

## 개요

- Monitoring에서 Observability로 패러다임이 변화하고 있음
  - 전통적인 Monitoring 시스템은 사전 정의된 metric을 통해 인프라의 '상태'를 보는 데 집중
  - 현대적 Observability 모델은 아래 세 가지 요소를 통해 시스템 전체의 내부 상태를 추론함
    - Logs : 특정 시점에 발생한 이벤트 단위 기록. 에러 메시지 등
    - Metrics : 시간 단위 수치 데이터. CPU 사용률, 메모리 사용량, 요청 횟수 등
    - Traces : 분산 시스템 환경에서 단일 요청이 여러 서비스를 거쳐가는 흐름을 나타내는 데이터 구조

- 다양한 데이터를 활용하여 시스템 내부 동작과 사용자 경험을 이해
- 이미 알려진 패턴 외에 앞으로 나타날 수 있는 문제까지 사전적으로 대응

- 서버의 상태가 아니라 사용자 요청 단위를 중심으로 하여 성공 / 실패를 구분



## APM

- **Traces와 Metrics** 수집 및 분석에 특화된 도구
- 앱 성능 및 가용성을 실시간으로 추적 및 관리
- 프론트, 백, DB 등 전체 앱 스택 커버

- 세부 정보 제공 및 자동 알림 설정 가능



### 추적 대상

- 앱 응답 시간, 처리량, 오류율
- 코드 단위 지연시간(메서드 호출 및 SQL query 실행 시간 등)
- 인프라 구성 요소의 성능 및 사용량
- 실제 사용자의 트랜잭션에 대한 end-to-end 사용경험



### 고려사항

- 오버헤드 관리
  - APM 도구 자체가 앱 성능에 영향을 미칠 수 있음
- 보안
  - APM 데이터에 민감 정보가 포함될 수 있음
  - 네트워크 공격면이 넓어질 수 있음

- AI / ML 모델 활용, 클라우드 활용 등 현대적 아키텍쳐에 fit한 설계 필요



## ELK stack

- **Logs** 분석 및 모니터링에 사용되는 Elasticsearch, Logstash, Kibana 세 가지 오픈소스 tool의 조합을 말함



### 동작 흐름

- Logstash : 서버 및 앱 등 다양한 소스로부터 로그 데이터를 수집하고 전처리 -> Elasticsearch에 전달
- Beats : Logstash의 대안으로서, 훨씬 가볍고 빠른 대신 전처리(변환)는 거의 안 하고 다른 tool에 위임
- Elasticsearch : 데이터를 indexing하고 저장 -> 초고속 검색 및 집계 지원
- Kibana : Elasticsearch 데이터를 시각화 -> 대시보드 형태로 제공



### 최신 동향

- ML 기능 추가로 이상 탐지 및 예측 분석 가능
- Cloud-native 관측 framework인 OpenTelemetry와 통합되며 분산 추적 기능 강화

- 로그 분석을 넘어 종합적인 데이터 분석 및 운영 플랫폼으로 진화하고 있음



## 소감

- 잘 모르는 것들을 정리하다 보니까 지식이 파편화되는 경향이 있어서 바로잡는데 시간을 좀 썼다.
  - `대~충 모니터링 tool이 이런 것들이 있구나~`로 학습이 끝나지 않고, 관측가능성의 세 요소와 연결해서 분류해냈음. 교재가 그다지 친절하지 않게 기술 스택만 열거돼 있어서 놓치고 넘어갈 뻔했네.