# EC2

- AWS가 제공하는 가상 서버 서비스
  - 서버라고는 하지만, 지정된 os만 깔린 가상 컴퓨터 한 대를 빌려준다고 생각하면 편함
  - 물론 우리가 사용하기에 별 차이 없다는 거고, VM이니까 실제로 컴퓨터 한 대는 아님
  - 여기에다 DB를 설치하면 DB서버가 되는 거고, django 앱을 설치하면 웹 서버가 되는 거고..



## 인스턴스

- User가 선택한 설정(OS, storage 크기, RAM, GPU, 네트워크 설정...)을 바탕으로 만든 가상 컴퓨터 공간
- free-tier에서는 일반적으로 t2.micro나 t3.micro처럼 작은 서버를 사용
- Linux계열 os중 하나인 `ubuntu 24.04 LTS`로 테스트
  - `Amazon Linux 2023`도 좋음. AWS가 만든 버전이라 AWS 기능들과 호환성이 좋고 효율성, 편의성 등 빠지는 게 없음. 프로젝트에서도 eb 사용할 때는 이걸로 만들었음

### 인스턴스 중지 | 종료

- 인스턴스 중지(stop)

  - 컴퓨터를 끄는 것과 같음
  - os는 돌아가지 않으니까 ec2 사용료는 내지 않지만, 저장소인 EBS에 대한 비용은 계속 부과
  - 중지했다가 다시 시작하면 ip주소는 바뀌지만 서버는 복구됨

- 인스턴스 종료(terminate)

  - 모든 데이터 삭제 및 접근 불가, 복구도 불가

  - 종료해도 수 분~수 시간동안 목록에 뜨지만 다 정리되고 나면 자동으로 목록에서 사라짐

    

## 보안 설정

### .pem key

- EC2 서버에 ssh 접속(터미널에 접근)하기 위한 비공개 key

- 인스턴스 생성시 .pem파일 생성됨
- 분실하면 해당 인스턴스 생명은 끝! 접속 못 함.
  - 접속은 못하지만 EBS는 따로 다른 인스턴스에 attach해서 데이터 자체는 살려낼 수 있다고는 

- 당연히 .gitignore에 추가할 것. 혹시라도 git이나 다른 경로를 통해 유출되면 즉시 폐기해야 함

##### ※ Key pair라고 부르는 이유?

- key는 public key와 private key로 나뉘어 있으며, public key는 ec2 내부에 저장되고 private key는 .pem파일로 발급된다. 자물쇠와 열쇠의 관계처럼 서로 맞춰보는 방식으로 인증이 이루어지기 때문에 pair라고 칭하는 것



### 보안 그룹

- ec2 서버에 붙는 가상 방화벽. 어떤 트래픽을 허용할지 설정하는 규칙의 집합

#### 인바운드 규칙

- 인스턴스 밖에서 안으로 들어오는 트래픽에 대한 규칙
- 기본값은 아무 포트도 열려있지 않음
- ssh 접속 : 터미널 접근(PORT 22)
- 웹 서버 접속 : http(PORT 80), https(PORT 443)



#### 아웃바운드 규칙

- 인스턴스 안에서 밖으로 나가는 트래픽에 대한 규칙
- 기본값은 모든 포트가 열려 있음
- 패키지 설치, 외부 API 호출 등
